# ipython

* IPython是更好的交互式解释器，提供更为强大的编辑和交互功能

## 安装

```bash
pip install ipython
```

## 启动

```bash
ipython
```

## ipython基础功能

* ipython自动保存历史记录到数据库文件，可以使用之前的历史输出输入
* ipython支持tab自动补全，补全关键字、变量、函数名
* 可以通过`?`显示对象信息，函数也是对象
* 可以通过`??`显示源代码等更详细的信息
* 可以通过`!`执行外部命令，无需退出解释器
* 数据结构会自动排版，增加可读性
* 可以与Jupyter结合提供更强的功能
* 在语句后面加上分号，不显示输出结果

## 查看历史命令

```python
# 查看历史命令
history

# 缩写
hist
```

## 显示当前路径

```python
%pwd
```

## 修改当前目录

```python
%cd

# 切换到指定项目
%cd 目录

# 切换到父目录
%cd ..

# 切换到上次访问的目录
%cd -
```

## 内省

```python
?print
```

## 检测执行时间

* `%time`一次执行的时间
* `%timeit`多次执行的平均时间
* 一个百分号`%`，表示本行有效
* 两个百分号`%%`，开启代码块输入模式，整个代码块有效

```python
# 以print为例

# 一次执行的时间
%time print('a')

# 多次执行的平均时间
%timeit print('a')

# 开启代码块输入
%%time
```

## 查看环境中变量

* `%who`，只显示变量名称
* `%whos`，列表显示变量，包括类型和值

```python
# 显示所有变量
%who

# 显示int类型变量
%who int

# 列表显示所有变量
%whos

# 列表显示int类型变量
%whoss int
```

## 删除环境中变量

```python
%xdel a
```

## 删除环境中所有变量

```python
# 删除
%reset

# 强制删除
%reset -f
```

## 重新执行之前代码

```python
%rerun

# 重新执行指定行代码
%rerun 5
```

## 在ipython中调用外部命令

```python
# 进入命令行模式
!cmd

# 退出命令行模式
ipython

# 直接执行命令，以ls为例
!ls

# 直接执行命令，以ping为例
!ping 192.168.4.1
```

## 使用IO缓存

* `In`、`_in` 是之前所有输入的字典，以号码为key
* `Out`、`_oh`是之前所有输出的字典，以号码为key

```python
'''
In [1]: 1 + 0
Out[1]: 1

In [2]: 2 + 0
Out[2]: 2

In [3]: 3 + 0
Out[3]: 3

In [4]: 4 + 0
Out[4]: 4

In [5]: 5 + 0
Out[5]: 5

In [6]: 6 + 0
Out[6]: 6
'''

# 前第1条输出
_ # 6

# 前第2条输出
__ # 5

# 前第3条输出
___ # 4

# 第n条输出，以1为例
_1 # 1

# 前第1条输入
_i # '6 + 0'

# 前第2条输入
__i # '5 + 0'

# 前第3条输入
___i // '4 + 0'

# 第n条输入，以1为例
_i1 // '1 + 0'

# 
# In 
# _in 
```



